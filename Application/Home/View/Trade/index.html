<include file="Trade:header"/>

<div class="content">
    <div class="clearfix trade-page-content trade-page">
        <div class="page-left pull-left"><!--左侧-->
            <div class="content-unit bjs-tab">
                <div class="bjs-tab-head">
                    <ul class="clearfix flex-box">
                        <li>
                            <a class="active" href="#"><span>CNYT</span></a>
                        </li>
                        <li>
                            <a href="#"><span>USDT</span></a>
                        </li>
                        <li>
                            <a href="#"><span>BTC</span></a>
                        </li>
                        <li>
                            <a href="#"><span>ETH</span></a>
                        </li>
                        <li>
                            <a href="#"><span>{$Think.Lang.V_TRADE_INDEX_1}</span></a>
                        </li>
                        <li>
                            <a href="javascript:;" class="localStorage-star"><span>{$Think.Lang.V_TRADE_INDEX_2}</span></a>
                        </li>
                    </ul>
                </div>
                <div class="bjs-search"><!--左侧搜索-->
                    <div class="clearfix">
                        <div class="bjs-tab-tr clearfix">
                            <div class="bjs-search-box">
                                <input type="text" name="keywords" placeholder="{$Think.Lang.V_INDEX_COIN_SEARCH}">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="bjs-tab-cont">
                    <div class="clearfix">
                        <div class="bjs-tab-table page-left-iscroll">
                            <div class="bjs-tab-thead">
                                <ul class="clearfix bjs-tab-tr">
                                    <li><span class="curr-base">{$Think.Lang.V_SHARE_COIN_TYPE}<em class="bjs-sort-up"></em><em class="bjs-sort-down"></em></span></li>
                                    <li><span class="curr-base">{$Think.Lang.V_INDEX_COIN_PRICE}<em class="bjs-sort-up"></em><em class="bjs-sort-down"></em></span></li>
                                    <li><span class="curr-base">{$Think.Lang.V_INDEX_UPSDOWNS}<em class="bjs-sort-up"></em><em class="bjs-sort-down"></em></span></li>
                                    <li><span class="bjs-star star-cur"></span></li>
                                </ul>
                            </div>
                            <div class="page-left-iscroll-wrap" id="page-left-iscroll-wrap">
                                <div class="page-left-iscroll-box">
                                    <div class="bjs-tab-title"><span>{$Think.Lang.V_INDEX_MAIN_AREA}</span><a class="pull-right vote-title-link link-to-introduce" href="/Finance/introduce_main.html" target="_blank">{$Think.Lang.V_INDEX_MAIN_AREA_INTRODUCE}</a></div>
                                    <div class="bjs-tab-tbody" id="all_coin">
                                    </div>
                                    <div class="bjs-tab-title"><span>{$Think.Lang.V_INDEX_NEW_AREA}</span><a class="pull-right vote-title-link link-to-introduce" href="/Finance/introduce_new.html" target="_blank">{$Think.Lang.V_INDEX_NEW_AREA_INTRODUCE}</a></div>
                                    <div class="bjs-tab-tbody" id="all_coin_new">
                                    </div>
                                    <div class="bjs-tab-title"><span>{$Think.Lang.V_INDEX_EXPERIMENT_AREA}</span><a class="pull-right vote-title-link link-to-introduce" href="/Finance/introduce_experiment.html" target="_blank">{$Think.Lang.V_INDEX_EXPERIMENT_AREA_INTRODUCE}</a></div>
                                    <div class="bjs-tab-tbody" id="all_coin_experiment">
                                    </div>
                                    <!--左侧行情模板-->
                                    <script type="text/template" id="all_coin-tmp">
                                        {{ for(var i in coin_list){ if(coin_list[i].main_coin == is_new ){  }}
                                        <ul class="clearfix bjs-tab-tr" data-id="{{= coin_list[i].name}}">
                                            <li><a href="/trade/index/market/{{= coin_list[i].name }}"><span class="bjs-bi-icon "><img src="__UPLOAD__/coin/{{= coin_list[i].img }}">{{= coin_list[i]['title'] }}</span></a></li>
                                            <li>{{= coin_list[i].new_price }}</li>
                                            <li>
                                                {{ if (coin_list[i].change > 0){ }}
                                                <span class="icon-arrow-up">+{{= coin_list[i].change }}%</span>
                                                {{ } else if (coin_list[i].change < 0){ }}
                                                <span class="icon-arrow-down">{{= coin_list[i].change }}%</span>
                                                {{ } else { }}
                                                <span class="c414755">{{= coin_list[i].change }}</span>
                                                {{ } }}
                                            </li>
                                            <li><span class="bjs-star"></span></li>
                                        </ul>
                                        {{ } }}{{ } }}
                                    </script>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--左侧结束-->
        <!--右侧-->
        <div class="page-right pull-right">
            <div class="clearfix">
                <div class="page-left-2-1">
                    <div class="trade-unit-box">
                        <h3 class="trade-view-title">
                            <span class="trade-bi-icon pull-left"><img src="__UPLOAD__/coin/{$C['market'][$market]['xnbimg']}"><span><?php echo str_replace("CNY","CNYT",$C['market'][$market]['title'])?></span></span>
                            <div class="trade-head-info pull-left">
                                <!--<span class="trade-bi-icon">ETH/CNYT</span>-->
                                {$Think.Lang.V_TRADE_INDEX_3}<span class="trade-bi-num cc7cce6"  id="market_new_price">$0/¥0</span>
                                {$Think.Lang.V_TRADE_INDEX_4}<span class="trade-bi-num"  id="market_max_price"></span>
                                {$Think.Lang.V_TRADE_INDEX_5}<span class="trade-bi-num"  id="market_min_price"></span>
                                {$Think.Lang.V_TRADE_INDEX_6}<span class="trade-bi-num"  id="market_volumes"></span>
                                {$Think.Lang.V_TRADE_INDEX_7}<span class="trade-bi-num"  id="market_volume"></span>
                                <span class="icon-arrow-up"  id="market_change">0%</span>
                            </div>
                            <div class="pull-right">
                                <a class="pull-left" href="/trade/profession/market/{$market}/profession.html">{$Think.Lang.V_TRADE_INDEX_8}</a>
                                <a class="pull-right ml10" href="/Trade/info/market/{$market}t/" target="_blank">{:C('coin')[$xnb]['title']}{$Think.Lang.V_TRADE_INDEX_9}</a>
                            </div>

                        </h3>
                        <!--<div class="clearfix trade-view-choose">-->
                        <!--<ul class="pull-left">-->
                        <!--<li>-->
                        <!--<a class="active" href="#">K线图</a>-->
                        <!--</li>-->
                        <!--<li>-->
                        <!--<a href="#">单线图</a>-->
                        <!--</li>-->
                        <!--<li>-->
                        <!--<a href="#">深度图</a>-->
                        <!--</li>-->
                        <!--</ul>-->
                        <!--<ul class="pull-right">-->
                        <!--<li>-->
                        <!--<a href="#">10秒</a>-->
                        <!--</li>-->
                        <!--<li>-->
                        <!--<a href="#">1分钟</a>-->
                        <!--</li>-->
                        <!--<li>-->
                        <!--<a class="active" href="#">3分钟</a>-->
                        <!--</li>-->
                        <!--<li>-->
                        <!--<a href="#">15分钟</a>-->
                        <!--</li>-->
                        <!--<li>-->
                        <!--<a href="#">30分钟</a>-->
                        <!--</li>-->
                        <!--<li>-->
                        <!--<a href="#">1小时</a>-->
                        <!--</li>-->
                        <!--<li>-->
                        <!--<a href="#">8小时</a>-->
                        <!--</li>-->
                        <!--<li>-->
                        <!--<a href="#">1天</a>-->
                        <!--</li>-->
                        <!--<li>-->
                        <!--<a class="hide" href="#">1天</a>-->
                        <!--</li>-->
                        <!--<li>-->
                        <!--<a class="hide" href="#">1天</a>-->
                        <!--</li>-->
                        <!--<li>-->
                        <!--<a class="hide" href="#">1天</a>-->
                        <!--</li>-->
                        <!--</ul>-->
                        <!--</div>-->
                        <div class="c2c-tradingview" id="tv_chart_container">
                            <iframe style="border-style: none;" border="0" width="100%" height="100%" id="market_chart" src=""></iframe>
                            <script type="text/javascript">
                                if($.cookies.get('skin') !== 'white'){
                                    $('#market_chart').attr('src','/Trade/specialty/market/{$market}/?theme_name=dark');
                                }else{
                                    $('#market_chart').attr('src','/Trade/specialty/market/{$market}/?theme_name=light');
                                }
                            </script>
                        </div>
                    </div>
                </div>
            </div>
            <div class="clearfix">
                <div class="page-left-2 pull-left">
                    <div class="page-left-2-2">
                        <div class="c2c-trading clearfix">
                            <div class="trading-buy pull-left">
                                <h4 class="trading-box-title">
                                    <span>{$Think.Lang.V_FINANCE_COMMISSION_BUY}</span></h4>
                                <p class="trading-box-list trading-box-list2">
                                    <span class="cb94e50">{$Think.Lang.V_TRADE_INDEX_10}<span id="my_rmb">0</span>CNYT </span>
                                    <eq name="zr_jz" value="1">
                                        <a href="/Finance/myzr/coin/{$xnb}">{$Think.Lang.V_LOGIN_REGISTER4_8}</a>
                                    </eq>
                                    <eq name="zc_jz" value="1">
                                        <a href="/Finance/myzc/coin/{$xnb}">{$Think.Lang.V_FINANCE_WITHDRAW}</a>
                                    </eq>
                                    <eq name="C['trade_hangqing']" value="1">
                                        <a href="javascript:;" onclick="hangqing()">{$Think.Lang.V_TRADE_INDEX_11}</a>
                                    </eq>
                                </p>

                                <p class="trading-box-list trading-box-list2">{$Think.Lang.V_TRADE_INDEX_12} <span id="buy_max" title="{$Think.Lang.V_TRADE_INDEX_13}">-</span>,{$Think.Lang.V_TRADE_INDEX_14}<a href="javascript:;"><span id="buy_best_price" onclick="setMaiRu();">-</span></a> CNYT/{$xnb|strtoupper}</p>
                                <p class="input-group trading-box-list trading-input-group"><span class="input-group-addon">{$Think.Lang.V_TRADE_INDEX_15}</span><input id="buy_price" class="form-control" type="text" name="price" placeholder="{$Think.Lang.V_TRADE_INDEX_16}"></p>
                                <p class="input-group trading-box-list trading-input-group"><span class="input-group-addon">{$Think.Lang.V_TRADE_INDEX_17}</span><input class="form-control" type="text" id="buy_num" name="num"></p>
                                <div class="trading-box-list">
                                    {$Think.Lang.V_TRADE_INDEX_18}
                                    <div class="bjs-progress trading-progress trading-progress-r clearfix">
                                        <div class="progress-box" id="buy-progress">
                                            <div class="progress-left"></div>
                                            <div class="progress-btn"></div>
                                        </div><div class="progress-num">0%</div>
                                        <input type="hidden" name="progress-num" class="progress-num-input">
                                    </div>
                                </div>

                                <p class="trading-box-list trading-box-list2">{$Think.Lang.V_TRADE_INDEX_19}<span id="buy_mum">-</span> </p>
                                <p class="input-group trading-box-list trading-input-group"><span class="input-group-addon">{$Think.Lang.V_ALL_PASSWORD_PAY}</span><input class="form-control" id="buy_paypassword" name="pwtrade" type="password"><span onclick="layertpwd()" class="icon-setting setting-pay-password">{$Think.Lang.V_TRADE_INDEX_20}</span></p>
                                <p class="trading-box-list trading-box-list2 cplaceholder">
                                    <!--<eq name="showPW" value="0">-->
                                    <!--您设置了不需要输入交易密码,-->
                                    <!--</eq>-->
                                    <!--<eq name="showPW" value="2">-->
                                    <!--根据设置本次不需要输入交易密码,-->
                                    <!--</eq>-->
                                    {$Think.Lang.V_FINANCE_OUT_LIST_TITLE4}(<span class="cb94e50">{:C('market')[$market]['fee_buy']}%</span> {$Think.Lang.V_TRADE_INDEX_21}）
                                </p>
                                <p class="trading-box-list"><a class="trading-buy-btn" href="javascript:;" id="buy-btn" onclick="tradeadd_buy();">{$Think.Lang.V_FINANCE_COMMISSION_BUY}</a></p>
                            </div>
                            <div class="trading-sell pull-right">
                                <h4 class="trading-box-title">
                                    <span>{$Think.Lang.V_FINANCE_COMMISSION_SHELL}</span>
                                    <span class="pull-right">
                                                <label class="c2c-off-open"><input type="checkbox" name="name[]" value="0" class="hide"><span class="pull-right fontnormal">{$Think.Lang.V_TRADE_INDEX_22} </span></label>
                                            </span>
                                </h4>
                                <p class="trading-box-list trading-box-list2">
                                    <span class="c03ad6f">{$Think.Lang.V_TRADE_INDEX_10}  <span id="my_xnb">0</span>{$xnb|strtoupper} </span>
                                    <eq name="zr_jz" value="1">
                                        <a href="/Finance/myzr/coin/{$xnb}">{$Think.Lang.V_LOGIN_REGISTER4_8}</a>
                                    </eq>
                                    <eq name="zc_jz" value="1">
                                        <a href="/Finance/myzc/coin/{$xnb}">{$Think.Lang.V_FINANCE_WITHDRAW}</a>
                                    </eq>
                                    <eq name="C['trade_hangqing']" value="1">
                                        <a href="javascript:;" onclick="hangqing()">{$Think.Lang.V_TRADE_INDEX_11}</a>
                                    </eq>
                                </p>
                                <p class="trading-box-list trading-box-list2">{$Think.Lang.V_TRADE_INDEX_23}  <span id="sell_max" title="{$Think.Lang.V_TRADE_INDEX_24}">-</span>{$Think.Lang.V_TRADE_INDEX_25}<a href="javascript:;"><span id="sell_best_price" onclick="setMaiChu();">-</span></a> CNYT/{$xnb|strtoupper}</p>
                                <p class="input-group trading-box-list trading-input-group"><span class="input-group-addon">{$Think.Lang.V_TRADE_INDEX_26}</span><input id="sell_price" class="form-control" type="text" name="price" placeholder="{$Think.Lang.V_TRADE_INDEX_16}"></p>
                                <p class="input-group trading-box-list trading-input-group"><span class="input-group-addon">{$Think.Lang.V_TRADE_INDEX_27}</span><input class="form-control" type="text" id="sell_num" name="num"></p>
                                <div class="trading-box-list">
                                    {$Think.Lang.V_TRADE_INDEX_28}
                                    <div class="bjs-progress trading-progress trading-progress-g clearfix">
                                        <div class="progress-box" id="sell-progress">
                                            <div class="progress-left"></div>
                                            <div class="progress-btn"></div>
                                        </div><div class="progress-num">0%</div>
                                        <input type="hidden" name="progress-num" class="progress-num-input">
                                    </div>
                                </div>
                                <p class="trading-box-list trading-box-list2">{$Think.Lang.V_TRADE_INDEX_19}<span id="sell_mum">-</span> </p>
                                <p class="input-group trading-box-list trading-input-group"><span class="input-group-addon">{$Think.Lang.V_ALL_PASSWORD_PAY}</span><input class="form-control" id="sell_paypassword" name="pwtrade" type="password"><span onclick="layertpwd()" class="icon-setting setting-pay-password">{$Think.Lang.V_TRADE_INDEX_20}</span></p>
                                <p class="trading-box-list trading-box-list2 cplaceholder">
                                    <!--<eq name="showPW" value="0">-->
                                    <!--您设置了不需要输入交易密码,-->
                                    <!--</eq>-->
                                    <!--<eq name="showPW" value="2">-->
                                    <!--根据设置本次不需要输入交易密码,-->
                                    <!--</eq>-->
                                    {$Think.Lang.V_FINANCE_OUT_LIST_TITLE4}(<span class="c03ad6f">{:C('market')[$market]['fee_sell']}%</span> {$Think.Lang.V_TRADE_INDEX_21}）
                                </p>
                                <p class="trading-box-list"><a class="trading-sell-btn" href="javascript:;" id="sell-btn" onclick="tradeadd_sell();">{$Think.Lang.V_FINANCE_COMMISSION_SHELL}</a></p>
                            </div>
                        </div>
                    </div>
                    <div class="page-left-2-3">
                        <div class="my-tab-box trade-unit-box clearfix">
                            <div class="my-tab-head">
                                <a href="#">{$Think.Lang.V_TRADE_INDEX_29}</a>
                                <a href="#">{$Think.Lang.V_TRADE_INDEX_30}</a>
                                <a href="#" class="active">{$Think.Lang.V_TRADE_INDEX_31}</a> <label class="c2c-off-open pull-right"><input type="checkbox" name="name[]" value="0" class="hide"><span class="pull-right fontnormal">{$Think.Lang.V_TRADE_INDEX_32} </span></label>
                            </div>
                            <div class="my-tab-cont">
                                <div class="my-tab-unit">
                                    <div class="my-tab-scroll">
                                        <div class="my-tab-scroll-head">
                                            <table class="c2c-table">
                                                <thead>
                                                <tr>
                                                    <th>{$Think.Lang.V_TRADE_INDEX_33}</th>
                                                    <th>{$Think.Lang.V_TRADE_INDEX_34}</th>
                                                    <th>{$Think.Lang.V_INDEX_COIN_PRICE}</th>
                                                    <th>{$Think.Lang.V_FINANCE_MYCZ_BILL_NUM}</th>
                                                    <th>{$Think.Lang.V_TRADE_INDEX_30}</th>
                                                    <th>{$Think.Lang.V_TRADE_INDEX_35}</th>
                                                    <th>{$Think.Lang.V_FINANCE_ZCDB_19}</th>
                                                </tr>
                                                </thead>
                                            </table>
                                        </div>
                                        <div class="my-tab-scroll-cont" id="my-tab-scroll-box-0">
                                            <div>
                                                <table class="c2c-table">
                                                    <thead>
                                                    <tr>
                                                        <th>{$Think.Lang.V_TRADE_INDEX_33}</th>
                                                        <th>{$Think.Lang.V_TRADE_INDEX_34}</th>
                                                        <th>{$Think.Lang.V_INDEX_COIN_PRICE}</th>
                                                        <th>{$Think.Lang.V_FINANCE_MYCZ_BILL_NUM}</th>
                                                        <th>{$Think.Lang.V_TRADE_INDEX_30}</th>
                                                        <th>{$Think.Lang.V_TRADE_INDEX_35}</th>
                                                        <th>{$Think.Lang.V_FINANCE_ZCDB_19}</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody id="entrustlist">
                                                    <tr><td colspan="7"><div class="no-data tc"><span>{$Think.Lang.V_TRADE_INDEX_36}</span></div></td></tr>
                                                    </tbody>
                                                </table>
                                                <!--我的委托记录模板-->
                                                <script type="text/template" id="entrustlist-tmp">
                                                    {{ for(var i in  entrusts){ }}
                                                    <tr>
                                                        {{ if(entrusts[i].type == 1){ }}
                                                        <td>{{= entrusts[i].addtime }}</td>
                                                        <td>{$Think.Lang.V_TRADE_INDEX_39}</td>
                                                        <td><div title="{$Think.Lang.V_TRADE_INDEX_37}" onclick="autotrust(this,'buy',2)" class="mouseover">{{= entrusts[i].price }}</div>></td>
                                                        {{ }else{ }}
                                                        <td>{{= entrusts[i].addtime }}</td>
                                                        <td>{$Think.Lang.V_TRADE_INDEX_40}</td>
                                                        <td><div title="{$Think.Lang.V_TRADE_INDEX_38}" onclick="autotrust(this,'sell',2)" class="mouseover">{{= entrusts[i].price }}</div></td>
                                                        {{  } }}
                                                        <td>{{= entrusts[i].num }}</td>
                                                        <td>{{= entrusts[i].deal }}</td>
                                                        <td>{{= (entrusts[i].price * entrusts[i].num).toFixed(6) }}</td>
                                                        <td><a id="{{= entrusts[i].id }}" onclick="cancelaa('{{= entrusts[i].id }}')" href="javascript:;">{$Think.Lang.V_TRADE_INDEX_41}</a></td>
                                                    </tr>
                                                    {{  } }}
                                                </script>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="my-tab-unit">
                                    <div class="my-tab-scroll">
                                        <div class="my-tab-scroll-head">
                                            <table class="c2c-table">
                                                <thead>
                                                <tr>
                                                    <th>{$Think.Lang.V_FINANCE_COMMISSION_TIME}</th>
                                                    <th>{$Think.Lang.V_FINANCE_MYCZ_BILL_TYPE}</th>
                                                    <th>{$Think.Lang.V_INDEX_COIN_PRICE}</th>
                                                    <th>{$Think.Lang.V_TRADE_INDEX_42}</th>
                                                    <th>{$Think.Lang.V_TRADE_INDEX_43}</th>
                                                </tr>
                                                </thead>
                                            </table>
                                        </div>
                                        <div class="my-tab-scroll-cont" id="my-tab-scroll-box-1">
                                            <div>
                                                <table class="c2c-table">
                                                    <thead>
                                                    <tr>
                                                        <th>{$Think.Lang.V_FINANCE_COMMISSION_TIME}</th>
                                                        <th>{$Think.Lang.V_FINANCE_MYCZ_BILL_TYPE}</th>
                                                        <th>{$Think.Lang.V_INDEX_COIN_PRICE}</th>
                                                        <th>{$Think.Lang.V_TRADE_INDEX_42}</th>
                                                        <th>{$Think.Lang.V_TRADE_INDEX_43}</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody id="entrust_finish">
                                                    <tr><td colspan="5"><div class="no-data tc"><span>{$Think.Lang.V_TRADE_INDEX_36}</span></div></td></tr>
                                                    </tbody>
                                                </table>
                                                <!--我的成交记录模板-->
                                                <script type="text/template" id="entrust_finish-tmp">
                                                    {{ for(var i=0;i < entrusts.length;i++){ }}
                                                    <tr>
                                                        <td>{{= entrusts[i].addtime }}</td>
                                                        {{ if(entrusts[i].type == 1){ }}
                                                        <td>{$Think.Lang.V_FINANCE_COMMISSION_BUY}</td>
                                                        {{ }else{ }}
                                                        <td>{$Think.Lang.V_FINANCE_COMMISSION_SHELL}</td>
                                                        {{ } }}
                                                        <td>{{= entrusts[i].price }}</td>
                                                        <td>{{= entrusts[i].num }}</td>
                                                        <td>{{= entrusts[i].deal }}</td>
                                                    </tr>
                                                    {{  } }}
                                                </script>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="my-tab-unit active">
                                    <div class="my-tab-scroll">
                                        <div class="my-tab-scroll-head">
                                            <table class="c2c-table">
                                                <thead>
                                                <tr>
                                                    <th><div class="c2c-table-bi-icon">{$Think.Lang.V_SHARE_COIN_TYPE}</div></th>
                                                    <th>{$Think.Lang.V_TRADE_INDEX_44}</th>
                                                    <th>{$Think.Lang.V_TRADE_INDEX_45}</th>
                                                    <th>{$Think.Lang.V_TRADE_INDEX_46}</th>
                                                    <th>{$Think.Lang.V_TRADE_INDEX_47}</th>
                                                    <th>{$Think.Lang.V_FINANCE_ZCDB_19}</th>
                                                </tr>
                                                </thead>
                                            </table>
                                        </div>
                                        <div class="my-tab-scroll-cont my-tab-scroll-cont2" id="my-tab-scroll-box-2">
                                            <div>
                                                <table class="c2c-table">
                                                    <thead>
                                                    <tr>
                                                        <th>{$Think.Lang.V_SHARE_COIN_TYPE}</th>
                                                        <th>{$Think.Lang.V_TRADE_INDEX_44}</th>
                                                        <th>{$Think.Lang.V_TRADE_INDEX_45}</th>
                                                        <th>{$Think.Lang.V_TRADE_INDEX_46}</th>
                                                        <th>{$Think.Lang.V_TRADE_INDEX_47}</th>
                                                        <th>{$Think.Lang.V_FINANCE_ZCDB_19}</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody id="my_coin">
                                                    <tr><td colspan="6"><div class="no-data tc"><span>{$Think.Lang.V_TRADE_INDEX_36}</span></div></td></tr>
                                                    </tbody>
                                                </table>

                                                <script type="text/template" id="my_coin-tmp">
                                                    {{ for(var i in my_coin_list){  }}
                                                    <tr>
                                                        <td><div class="c2c-table-bi-icon"><img src="__UPLOAD__/coin/{{= my_coin_list[i].img }}"/>  {{= my_coin_list[i].name }}</div></td>
                                                        <td>{{= my_coin_list[i].xnb }}</td>
                                                        <td>{{= my_coin_list[i].xnbd }}</td>
                                                        <td>{{= my_coin_list[i].xnbz }}</td>
                                                        <td>{{= my_coin_list[i].zhehe }}</td>
                                                        <td>
                                                            {{ if(my_coin_list[i].zr_jz == 1){  }}
                                                            <a class="c2c-option-btn c2c-buy-btn" href="/Finance/myzr/coin/{{= my_coin_list[i].xnbs }}">{$Think.Lang.V_LOGIN_REGISTER4_8}</a>
                                                            {{ }else{ }}
                                                            <a class="c2c-option-btn c2c-btn-disable" href="javascript:;" >{$Think.Lang.V_LOGIN_REGISTER4_8}</a>
                                                            {{ } }}
                                                            {{ if(my_coin_list[i].zc_jz == 1){ }}
                                                            <a class="c2c-option-btn c2c-sell-btn" href="/Finance/myzc/coin/{{= my_coin_list[i].xnbs }}">{$Think.Lang.V_FINANCE_WITHDRAW}</a>
                                                            {{ }else{ }}
                                                            <a class="c2c-option-btn c2c-btn-disable" href="javascript:;">{$Think.Lang.V_FINANCE_WITHDRAW}</a>
                                                            {{ } }}
                                                        </td>
                                                    </tr>
                                                    {{ } }}
                                                </script>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="page-right-2 pull-right">
                    <div class="page-right-2-2">
                        <div class="trade-unit-box trade-global-box clearfix">
                            <h4 class="trade-unit-title">
                                <span class="active">{$Think.Lang.V_TRADE_INDEX_48}</span><span class="icon-arrow-up font18" id="price_now"></span>
                                <label class="c2c-off-open pull-right"><input type="checkbox" name="name[]" value="0" class="hide"><span class="pull-right"></span></label>
                            </h4>
                            <div class="trade-global-scroll">
                                <div class="my-tab-scroll my-tab-scroll4" id="trade_moshi_liaotian_2">
                                    <div class="my-tab-scroll-head">
                                        <div class="c2c-table-box c2c-table-box-head">
                                            <ul class="clearfix">
                                                <li class="c2c-table-item-1">{$Think.Lang.V_TRADE_INDEX_34}</li>
                                                <li class="c2c-table-item-2">{$Think.Lang.V_INDEX_COIN_PRICE}</li>
                                                <li class="c2c-table-item-3">{$Think.Lang.V_FINANCE_MYCZ_BILL_NUM}</li>
                                                <li class="c2c-table-item-4">{$Think.Lang.V_TRADE_INDEX_46}</li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="my-tab-scroll-cont my-tab-scroll-cont4" id="my-tab-scroll-box-4">
                                        <div id="selllist" class="dialog-loading">
                                        </div>
                                        <!--最新价卖模板-->
                                        <script type="text/template" id="selllist-tmp">
                                            <div class="c2c-table-box c2c-table-item-rect-down">
                                                {{ for(var i = 0;i< sellers.length;i++){  }}
                                                <ul class="clearfix">
                                                    <li class="c2c-table-item-1"><div class="icon-arrow-down">{$Think.Lang.V_TRADE_INDEX_40}{{= (sellers.length - i) }}</div></li>
                                                    <li class="c2c-table-item-2"><div class="icon-arrow-down mouseover" title="{$Think.Lang.V_TRADE_INDEX_38}" onclick="autotrust(this,'sell',1)">{{= sellers[i][0] }}</div></li>
                                                    <li class="c2c-table-item-3">{{= sellers[i][1]}}</li>
                                                    <li class="c2c-table-item-4">{{= (sellers[i][0] * sellers[i][1]).toFixed(6) }}</li>
                                                    <li class="c2c-table-item-rect"></li>
                                                </ul>
                                                {{  } }}
                                            </div>
                                        </script>
                                    </div>

                                    <div class="my-tab-scroll-cont4-bob"></div>

                                    <div class="my-tab-scroll-cont my-tab-scroll-cont6" id="my-tab-scroll-box-6">
                                        <div id="buylist" class="dialog-loading">
                                        </div>
                                        <!--最新价买模板-->
                                        <script type="text/template" id="buylist-tmp">
                                            <div class="c2c-table-box c2c-table-item-rect-up">
                                                {{ for(var i = 0;i< buyers.length;i++){  }}
                                                <ul class="clearfix">
                                                    <li class="c2c-table-item-1"><div class="icon-arrow-up">{$Think.Lang.V_TRADE_INDEX_39}{{= (i*1 + 1) }}</div></li>
                                                    <li class="c2c-table-item-2"><div class="icon-arrow-up mouseover" title="{$Think.Lang.V_TRADE_INDEX_37}" onclick="autotrust(this,'buy',1)">{{= buyers[i][0] }}</div></li>
                                                    <li class="c2c-table-item-3">{{= buyers[i][1] }}</li>
                                                    <li class="c2c-table-item-4">{{= (buyers[i][0] * buyers[i][1]).toFixed(6) }}</li>
                                                    <li class="c2c-table-item-rect"></li>
                                                </ul>
                                                {{  } }}
                                            </div>
                                        </script>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="page-right-2-3">
                        <div class="trade-unit-box trade-global-box clearfix">
                            <h4 class="trade-unit-title">
                                <span class="active">{$Think.Lang.V_TRADE_INDEX_49}</span>
                                <label class="c2c-off-open pull-right"><input type="checkbox" name="name[]" value="0" class="hide"><span class="pull-right"></span></label>
                                <!--<span class="pull-right trade-unit-title-msg">最高价: 0   最低价: 0</span>-->
                            </h4>
                            <div class="trade-global-scroll">
                                <div class="my-tab-scroll my-tab-scroll5">
                                    <div class="my-tab-scroll-head">
                                        <table class="c2c-table">
                                            <thead>
                                            <tr>
                                                <th style="width: 10%;">{$Think.Lang.V_TRADE_INDEX_33}</th>
                                                <th style="width: 32%;">{$Think.Lang.V_TRADE_INDEX_50}</th>
                                                <th style="width: 32%;">{$Think.Lang.V_TRADE_INDEX_43}</th>
                                                <th style="width: 26%;">{$Think.Lang.V_TRADE_INDEX_35}</th>
                                            </tr>
                                            </thead>
                                        </table>
                                    </div>
                                    <div class="my-tab-scroll-cont my-tab-scroll-cont5">
                                        <div id="orderlistLoading" class="dialog-loading">
                                            <table class="c2c-table">
                                                <thead>
                                                <tr>
                                                    <th style="width: 10%;">{$Think.Lang.V_TRADE_INDEX_33}</th>
                                                    <th style="width: 32%;">{$Think.Lang.V_TRADE_INDEX_50}</th>
                                                    <th style="width: 32%;">{$Think.Lang.V_TRADE_INDEX_43}</th>
                                                    <th style="width: 26%;">{$Think.Lang.V_TRADE_INDEX_35}</th>
                                                </tr>
                                                </thead>
                                                <tbody id="orderlist" >
                                                </tbody>
                                            </table>
                                            <!--最新成交记录模板-->
                                            <script type="text/template" id="orderlist-tmp">
                                                {{ for(var i=0;i < orders.length ;i++){  if(orders[i].type == 1){ }}
                                                <tr>
                                                    <td>{{=(orders[i].addtime+"").substring(6) }}</td>
                                                    <td><div class="icon-arrow-up mouseover" title="{$Think.Lang.V_TRADE_INDEX_37}" onclick="autotrust(this,'buy',2)">{{=orders[i].price }}</div></td>
                                                    <td>{{=orders[i].num }}</td>
                                                    <td>{{=orders[i].mum }}</td>
                                                </tr>
                                                {{ }else{ }}
                                                <tr>
                                                    <td>{{=(orders[i].addtime+"").substring(6) }}</td>
                                                    <td><div class="icon-arrow-down mouseover" title="{$Think.Lang.V_TRADE_INDEX_38}" onclick="autotrust(this,'sell',2)">{{=orders[i].price }}</div></td>
                                                    <td>{{=orders[i].num }}</td>
                                                    <td>{{=orders[i].mum }}</td>
                                                </tr>
                                                {{  } }}
                                                {{  } }}
                                            </script>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="__PUBLIC__/v2/js/template.js"></script>
<script type="text/javascript" src="__PUBLIC__/m/js/md5.js"></script>
<script>
    function getJsonTop1() {
        $.getJSON("/Ajax/getJsonTop?market={$market}&t=" + Math.random(), function (data) {
            if (data) {
                if (data['info']['new_price']) {
                    $('#market_new_price').removeClass('buy');
                    $('#market_new_price').removeClass('sell');
                    if ($("#market_new_price").html() > data['info']['new_price']) {
                        $('#market_new_price').addClass('sell');
                    }
                    if ($("#market_new_price").html() < data['info']['new_price']) {
                        $('#market_new_price').addClass('buy');
                    }
                    $("#market_new_price").html(data['info']['new_price']);
                }
                if (data['info']['buy_price']) {
                    $("#sell_best_price").html('￥' + data['info']['buy_price']);
                }
                if (data['info']['sell_price']) {
                    $("#buy_best_price").html('￥' + data['info']['sell_price']);
                }
                if (data['info']['max_price']) {
                    $("#market_max_price").html(data['info']['max_price']);
                    $("#zhangting").html("￥"+data['info']['max_price']);
                }
                if (data['info']['min_price']) {
                    $("#market_min_price").html(data['info']['min_price']);
                    $("#dieting").html("￥"+data['info']['min_price']);
                }
                if (data['info']['volume']) {
                    if (data['info']['volume'] > 10000) {
                        data['info']['volume'] = (data['info']['volume'] / 10000).toFixed(2) + lange.TRADE_INDEX_1
                    }
                    if (data['info']['volume'] > 100000000) {
                        data['info']['volume'] = (data['info']['volume'] / 100000000).toFixed(2) + lange.TRADE_INDEX_2
                    }
                    $("#market_volume").html(data['info']['volume']);
                    $("#market_volumes").html(data['info']['volumes']);
                }
                if (data['info']['change']) {
                    $('#market_change').removeClass('icon-arrow-down');
                    $('#market_change').removeClass('icon-arrow-up');
                    if (data['info']['change'] > 0) {
                        $('#market_change').addClass('icon-arrow-up');
                    } else {
                        $('#market_change').addClass('icon-arrow-down');
                    }
                    $("#market_change").html(data['info']['change'] + "%");
                }

                if (data['list']) {
                    var dt = {
                        coin_list: data['list'],
                        is_new: 1
                    }
                    var tpl = $('#all_coin-tmp').html();
                    var _html = template(tpl,dt);
                    $("#all_coin").html(_html);
                    dt = {
                        coin_list: data['list'],
                        is_new: 0
                    }
                    _html = template(tpl,dt);
                    $("#all_coin_new").html(_html);
                    dt = {
                        coin_list: data['list'],
                        is_new: 2
                    }
                    _html = template(tpl,dt);
                    $("#all_coin_experiment").html(_html);
                    home.refreshIScroll('page-left-iscroll-wrap');
                    home.resetStar();
                }
            }
        });
        setTimeout('getJsonTop1()', 60000);
    }

    function getMyCoin(){
        $.getJSON("/Ajax/getJsonUserCoin?t=" + Math.random(), function (data) {
            if (data) {
                var dt = {
                    my_coin_list: data
                }
                var tpl = $('#my_coin-tmp').html();
                var _html = template(tpl,dt);
                $("#my_coin").html(_html);

            }else{
                $('#my_coin').html('<tr><td colspan="6"><div class="no-data tc"><span>'+lange.TRADE_INDEX_3+'</span></div></td></tr>');
            }
            home.refreshIScroll('my-tab-scroll-box-2');
        });
    }

    function getEntrustFinish(){
        $.getJSON("/Ajax/getEntrustFinish?market={$market}&t=" + Math.random(), function (data) {
            if (data && data.length > 0) {
                var dt = {
                    entrusts: data
                }
                var tpl = $('#entrust_finish-tmp').html();
                var _html = template(tpl,dt);
                $("#entrust_finish").html(_html);
            }else{
                $("#entrust_finish").html('<tr><td colspan="5"><div class="no-data tc"><span>'+lange.TRADE_INDEX_3+'</span></div></td></tr>');
            }
            home.refreshIScroll('my-tab-scroll-box-1');
        });
    }

</script><!--头部币种价格-->

<script>
    function getJsonTop(data) {
        if (data['info']['new_price']) {
            $('#market_new_price').removeClass('buy');
            $('#market_new_price').removeClass('sell');
            $("#price_now").removeClass('icon-arrow-up');
            $("#price_now").removeClass('icon-arrow-down');
            if ($("#market_new_price").html() > data['info']['new_price']) {
                $('#market_new_price').addClass('sell');
                $("#price_now").addClass('icon-arrow-up');
            }
            if ($("#market_new_price").html() <= data['info']['new_price']) {
                $('#market_new_price').addClass('buy');
                $("#price_now").addClass('icon-arrow-down');
            }
            $("#market_new_price").html(data['info']['new_price']);
            $("#price_now").html(data['info']['new_price']);
        }
        if (data['info']['buy_price']) {
            $("#sell_best_price").html('￥' + data['info']['buy_price']);
        }
        if (data['info']['sell_price']) {
            $("#buy_best_price").html('￥' + data['info']['sell_price']);
        }
        if (data['info']['max_price']) {
            $("#market_max_price").html(data['info']['max_price']);
            $("#zhangting").html("￥"+data['info']['max_price']);
        }
        if (data['info']['min_price']) {
            $("#market_min_price").html(data['info']['min_price']);
            $("#dieting").html("￥"+data['info']['min_price']);
        }
        if (data['info']['volume']) {
            if (data['info']['volume'] > 10000) {
                data['info']['volume'] = (data['info']['volume'] / 10000).toFixed(2) + lange.TRADE_INDEX_1
            }
            if (data['info']['volume'] > 100000000) {
                data['info']['volume'] = (data['info']['volume'] / 100000000).toFixed(2) + lange.TRADE_INDEX_2
            }
            $("#market_volume").html(data['info']['volume']);
            $("#market_volumes").html(data['info']['volumes']);
        }
        if (data['info']['change']) {
            $('#market_change').removeClass('icon-arrow-up');
            $('#market_change').removeClass('icon-arrow-down');
            if (data['info']['change'] > 0) {
                $('#market_change').addClass('icon-arrow-up');
            } else {
                $('#market_change').addClass('icon-arrow-down');
            }
            $("#market_change").html(data['info']['change'] + "%");
        }else{
            $("#market_change").html(data['info']['change'] + "%");
        }
    }
</script>







<script type="text/javascript">
    var market = "{$market}";
    var market_round = "{$C['market'][$market]['round']}";
    var market_round_num = 9 - "{$C['market'][$market]['round']}";
    var userid = '';
    var trade_moshi = 1;
    var getDepth_tlme = null;
    var trans_lock = 0;
    var selllist_state = true;








    function hangqing() {
        layer.alert(lange.TRADE_INDEX_4+"{:C('market')[$market]['title']}<br><br>" +
            lange.TRADE_INDEX_4+"{$C['market'][$market]['hou_price']|NumToStr}<br>" +
            lange.TRADE_INDEX_5+"{:C('market')[$market]['zhang']}%<br>" +
            lange.TRADE_INDEX_6+"{:C('market')[$market]['die']}%<br>" +
            lange.TRADE_INDEX_7+"{$C['market'][$market]['buy_min']|NumToStr}<br>" +
            lange.TRADE_INDEX_8+"{$C['market'][$market]['sell_max']|NumToStr}<br>",
            {title:lange.TRADE_INDEX_9});
    }


    function moshi(id) {
        trade_moshi = id;
        $('.trade_moshi').removeClass('on');
        $('#trade_moshi_' + id).addClass('on');
        if (id == 3) {
            $('#selllist').hide();
        } else {
            $('#selllist').show();
        }

        if (id == 4) {
            $('#buylist').hide();
        } else {
            $('#buylist').show();
        }

        if (id == 2) {
            //$('#trade_moshi_liaotian_2').hide();
            //$('#trade_moshi_liaotian_1').show();
            //getChat();
        } else {
            $('#trade_moshi_liaotian_2').show();
            //$('#trade_moshi_liaotian_1').hide();
            // getDepth();
        }
    }

    //保存交易密码设置
    function tpwdsettingaa() {

        var paypassword = $("#apaypassword").val();
        var tpwdsetting = $("input[name='atpwdsetting']:checked").val();
        if (paypassword == "" || paypassword == null) {
            layer.tips(lange.TRADE_INDEX_10, '#apaypassword', {tips: 3});
            return false;
        }
        if (tpwdsetting == "" || tpwdsetting == null) {
            layer.tips(lange.TRADE_INDEX_11, '#atpwdsetting', {tips: 3});
            return false;
        }


        $.post('/user/uptpwdsetting', {paypassword: hex_md5(paypassword), tpwdsetting: tpwdsetting}, function (d) {
            if (d.status) {
                layer.msg(lange.TRADE_INDEX_12, {icon: 1,time:2000},function(){window.location.reload();});
            } else {
                layer.msg(d.info, {icon: 2});
            }

        }, 'json');
    }

    var isLogin = 0;
    function tradeadd_buy() {
        if(isLogin == 0){
            window.location = '/Login/index.html';
            return;
        }
        if (trans_lock) {
            layer.msg(lange.TRADE_INDEX_13, {icon: 2});
            return;
        }
        trans_lock = 1;

        var price = parseFloat($('#buy_price').val());
        var num = parseFloat($('#buy-num').val());
        var paypassword = $('#buy_paypassword').val();
        if (price == "" || price == null) {
            layer.tips(lange.TRADE_INDEX_14, '#buy_price', {tips: 3});
            return false;
        }
        if (num == "" || num == null) {
            layer.tips(lange.TRADE_INDEX_14, '#buy_num', {tips: 3});
            return false;
        }

        //加载层-风格3
        layer.load();

        //此处演示关闭
        setTimeout(function () {
            layer.closeAll('loading');
            trans_lock = 0;
        }, 10000);
        $.post("{:U('Trade/upTrade')}", {
            price: $('#buy_price').val(),
            num: $('#buy_num').val(),
            paypassword:  hex_md5($('#buy_paypassword').val()),
            market: market,
            type: 1
        }, function (data) {
            layer.closeAll('loading');
            trans_lock = 0;
            if (data.status == 1) {

                $("#buy_price").val('');
                $("#buy_num").val('');
                $("#sell_price").val('');
                $("#sell_num").val('');
                layer.msg(data.info, {icon: 1});
            } else {
                layer.msg(data.info, {icon: 2});
            }
        }, 'json');
    }

    function tradeadd_sell() {
        if(isLogin == 0){
            window.location = '/Login/index.html';
            return;
        }
        if (trans_lock) {
            layer.msg(lange.TRADE_INDEX_13, {icon: 2});
            return;
        }
        trans_lock = 1;
        var price = parseFloat($('#sell_price').val());
        var num = parseFloat($('#sell_num').val());
        var paypassword = $('#sell_paypassword').val();
        if (price == "" || price == null) {
            layer.tips(lange.TRADE_INDEX_14, '#sell_price', {tips: 3});
            return false;
        }
        if (num == "" || num == null) {
            layer.tips(lange.TRADE_INDEX_14, '#sell_num', {tips: 3});
            return false;
        }
        layer.load();
        //此处演示关闭
        setTimeout(function () {
            layer.closeAll('loading');
            trans_lock = 0;
        }, 10000);


        $.post("{:U('Trade/upTrade')}", {
            price: $('#sell_price').val(),
            num: $('#sell_num').val(),
            paypassword:  hex_md5($('#sell_paypassword').val()),
            market: market,
            type: 2
        }, function (data) {
            layer.closeAll('loading');
            trans_lock = 0;
            if (data.status == 1) {
                $("#buy_price").val('');
                $("#buy_num").val('');
                $("#sell_price").val('');
                $("#sell_num").val('');
                layer.msg(data.info, {icon: 1});
            } else {
                layer.msg(data.info, {icon: 2});
            }
        }, 'json');
    }


    //撤销
    function cancelaa(id) {
        $.post("{:U('Trade/chexiao')}", {id: id}, function (data) {
            if (data.status == 1) {
                layer.msg(data.info, {icon: 1});
            } else {
                layer.msg(data.info, {icon: 2});
            }
        });
    }

    function getTradelog(data) {
        if (data) {
            if (data['tradelog']) {
                var dataTmp = {
                    orders: data['tradelog']
                }
                var tpl = $('#orderlist-tmp').html();
                var _html = template(tpl,dataTmp);
                $("#orderlist").html(_html);
                $('#orderlistLoading').removeClass('dialog-loading');
            }
        }
    }

    function getDepth(datas) {
        data = datas[trade_moshi];
        if (trade_moshi != 2) {
            if (data) {
                if (data['depth']) {
                    var _html = '';
                    if (data['depth']['sell']) {
                        var dataTmp = {
                            sellers: data['depth']['sell']
                        }
                        var tpl = $('#selllist-tmp').html();
                        _html = template(tpl,dataTmp);
                    }
                    $("#selllist").html(_html).removeClass('dialog-loading');
                    home.refreshIScroll("my-tab-scroll-box-4");
                    if(selllist_state){
                        home.iscroll['my-tab-scroll-box-4'].scrollTo(0,home.iscroll['my-tab-scroll-box-4'].maxScrollY,0);
                        selllist_state = false;
                    }
                    _html = '';
                    if (data['depth']['buy']) {
                        var dataTmp = {
                            buyers: data['depth']['buy']
                        }
                        var tpl = $('#buylist-tmp').html();
                        _html = template(tpl,dataTmp);
                    }
                    $("#buylist").html(_html).removeClass('dialog-loading');
                    home.refreshIScroll("my-tab-scroll-box-6");
                }
            }
        }
    }

    function getEntrustAndUsercoin(data) {
        if (data) {
            if (data['entrust']) {
                var _html = '';
                if (data['entrust']) {
                    //$('#entrust_over').show();
                    var dataTmp = {
                        entrusts: data['entrust']
                    }
                    var tpl = $('#entrustlist-tmp').html();
                    _html = template(tpl,dataTmp);
                }
                $("#entrustlist").html(_html);
            } else {
                $('#entrustlist').html('<tr><td colspan="7"><div class="no-data tc"><span>'+lange.TRADE_INDEX_3+'</span></div></td></tr>');
            }
            home.refreshIScroll("my-tab-scroll-box-0");

            if (data['usercoin']) {
                if (data['usercoin']['cny']) {
                    $("#my_rmb").html(data['usercoin']['cny'].toFixed(2));
                    $("#userCoin").html(data['usercoin']['cny'].toFixed(2));
                } else {
                    $("#my_rmb").html('0.00');
                    $("#userCoin").html("0.00");
                }

                if (data['usercoin']['cnyd']) {
                    $("#my_rmbd").html(data['usercoin']['cnyd']);
                    $("#userCoinCnyd").html(data['usercoin']['cnyd']);
                } else {
                    $("#my_rmbd").html('0.00');
                    $("#userCoinCnyd").html("0.00");
                }

                if (data['usercoin']['xnb']) {
                    $("#my_xnb").html(data['usercoin']['xnb']);
                } else {
                    $("#my_xnb").html('0.00');
                }

                if (data['usercoin']['xnbd']) {
                    $("#my_xnbd").html(data['usercoin']['xnbd']);
                } else {
                    $("#my_xnbd").html('0.00');
                }
            }
        }
    }

    $(function () {
        if (userid > 0) {
            //getEntrustAndUsercoin();
        } else {
            $('#entrust_over').hide();
        }
    });
    function toNum(num, round) {
        return Math.round(num * Math.pow(10, round) - 1) / Math.pow(10, round);
    }

    // 自动填价格
    function autotrust(_this, type, cq) {

        if (type == 'sell') {
            $('#buy_price').val($(_this).html());
            var maxNum = '';
            if ($("#my_rmb").html() > 0) {
                maxNum = toNum(($("#my_rmb").html() / $('#buy_price').val() * 1.002), market_round_num);
                $("#buy_max").html(maxNum);
            }
            $("#buy_num").val(maxNum);
            if ($('#buy_num').val()) {
                $("#buy_mum").html(($('#buy_num').val() * $('#buy_price').val()).toFixed(8) * 1);
            }
        }
        if (type == 'buy') {
            $('#sell_price').val($(_this).html());
            var maxNum = '';
            if ($("#my_xnb").html() > 0) {
                maxNum = $("#my_xnb").html();
                $("#sell_max").html();
            }
            $("#sell_num").val(maxNum);
            if ($('#sell_num').val()) {
                $("#sell_mum").html(($('#sell_num').val() * $('#sell_price').val()).toFixed(8) * 1);
            }
        }

    }

    function  setMaiChu(){
        $('#sell_price').val($.trim($('#sell_best_price').html().replace('￥', '')));
        var buyprice = parseFloat($('#buy_price').val());
        var buynum = parseFloat($('#buy_num').val());
        var sellprice = parseFloat($('#sell_price').val());
        var sellnum = parseFloat($('#sell_num').val());
        var buymum = buyprice * buynum;
        var sellmum = sellprice * sellnum;
        var myrmb = $("#my_rmb").html();
        var myxnb = $("#my_xnb").html();
        var buykenum = 0;
        var sellkenum = 0;
        if (myrmb > 0) {
            buykenum = myrmb / buyprice;
        }
        if (myxnb > 0) {
            sellkenum = myxnb;
        }

        if (buyprice != null && buyprice.toString().split(".") != null && buyprice.toString().split(".")[1] != null) {
            if (buyprice.toString().split('.')[1].length > market_round) {
                $('#buy_price').val(buyprice.toFixed(market_round));
            }
        }
        if (buynum != null && buynum.toString().split(".") != null && buynum.toString().split(".")[1] != null) {
            if (buynum.toString().split('.')[1].length > market_round_num) {
                $('#buy_num').val(toNum(buynum, market_round_num));
            }
        }
        if (sellprice != null && sellprice.toString().split(".") != null && sellprice.toString().split(".")[1] != null) {
            if (sellprice.toString().split('.')[1].length > market_round) {
                $('#sell_price').val(sellprice.toFixed(market_round));
            }
        }
        if (sellnum != null && sellnum.toString().split(".") != null && sellnum.toString().split(".")[1] != null) {
            if (sellnum.toString().split('.')[1].length > market_round_num) {
                $('#sell_num').val(toNum(sellnum, market_round_num));
            }
        }
        if (buymum != null && buymum > 0) {
            $('#buy_mum').html(buymum.toFixed(8) * 1);
        }
        if (sellmum != null && sellmum > 0) {
            $('#sell_mum').html(sellmum.toFixed(8) * 1);
        }
        if (buykenum != null && buykenum > 0 && buykenum != 'Infinity') {
            $('#buy_max').html(toNum(buykenum, market_round_num));
        }
        if (sellkenum != null && sellkenum > 0 && sellkenum != 'Infinity') {
            $('#sell_max').html(sellkenum);
        }

    }



    function setMaiRu(){
        $('#buy_price').val($.trim($('#buy_best_price').html().replace('￥', '')));
        var buyprice = parseFloat($('#buy_price').val());
        var buynum = parseFloat($('#buy_num').val());
        var sellprice = parseFloat($('#sell_price').val());
        var sellnum = parseFloat($('#sell_num').val());
        var buymum = buyprice * buynum;
        var sellmum = sellprice * sellnum;
        var myrmb = $("#my_rmb").html();
        var myxnb = $("#my_xnb").html();
        var buykenum = 0;
        var sellkenum = 0;
        if (myrmb > 0) {
            buykenum = myrmb / (buyprice*1.002);
        }
        if (myxnb > 0) {
            sellkenum = myxnb;
        }

        if (buyprice != null && buyprice.toString().split(".") != null && buyprice.toString().split(".")[1] != null) {
            if (buyprice.toString().split('.')[1].length > market_round) {
                $('#buy_price').val(buyprice.toFixed(market_round));
            }
        }
        if (buynum != null && buynum.toString().split(".") != null && buynum.toString().split(".")[1] != null) {
            if (buynum.toString().split('.')[1].length > market_round_num) {
                $('#buy_num').val(toNum(buynum, market_round_num));
            }
        }
        if (sellprice != null && sellprice.toString().split(".") != null && sellprice.toString().split(".")[1] != null) {
            if (sellprice.toString().split('.')[1].length > market_round) {
                $('#sell_price').val(sellprice.toFixed(market_round));
            }
        }
        if (sellnum != null && sellnum.toString().split(".") != null && sellnum.toString().split(".")[1] != null) {
            if (sellnum.toString().split('.')[1].length > market_round_num) {
                $('#sell_num').val(toNum(sellnum, market_round_num));
            }
        }
        if (buymum != null && buymum > 0) {
            $('#buy_mum').html(buymum.toFixed(8) * 1);
        }
        if (sellmum != null && sellmum > 0) {
            $('#sell_mum').html(sellmum.toFixed(8) * 1);
        }
        if (buykenum != null && buykenum > 0 && buykenum != 'Infinity') {
            $('#buy_max').html(toNum(buykenum, market_round_num));
        }
        if (sellkenum != null && sellkenum > 0 && sellkenum != 'Infinity') {
            $('#sell_max').html(sellkenum);
        }



    }


    $('#buy_price,#buy_num,#sell_price,#sell_num').css("ime-mode", "disabled").bind('keyup change', function () {
        var buyprice = parseFloat($('#buy_price').val());
        var buynum = parseFloat($('#buy_num').val());
        var sellprice = parseFloat($('#sell_price').val());
        var sellnum = parseFloat($('#sell_num').val());
        var buymum = buyprice * buynum;
        var sellmum = sellprice * sellnum;
        var myrmb = $("#my_rmb").html();
        var myxnb = $("#my_xnb").html();
        var buykenum = 0;
        var sellkenum = 0;
        if (myrmb > 0) {
            buykenum = myrmb / buyprice;
        }
        if (myxnb > 0) {
            sellkenum = myxnb;
        }
        //alert("wobianliao");

        if (buyprice != null && buyprice.toString().split(".") != null && buyprice.toString().split(".")[1] != null) {
            if (buyprice.toString().split('.')[1].length > market_round) {
                $('#buy_price').val(buyprice.toFixed(market_round));
            }
        }
        if (buynum != null && buynum.toString().split(".") != null && buynum.toString().split(".")[1] != null) {
            if (buynum.toString().split('.')[1].length > market_round_num) {
                $('#buy_num').val(toNum(buynum, market_round_num));
            }
        }
        if (sellprice != null && sellprice.toString().split(".") != null && sellprice.toString().split(".")[1] != null) {
            if (sellprice.toString().split('.')[1].length > market_round) {
                $('#sell_price').val(sellprice.toFixed(market_round));
            }
        }
        if (sellnum != null && sellnum.toString().split(".") != null && sellnum.toString().split(".")[1] != null) {
            if (sellnum.toString().split('.')[1].length > market_round_num) {
                $('#sell_num').val(toNum(sellnum, market_round_num));
            }
        }
        if (buymum != null && buymum > 0) {
            $('#buy_mum').html(buymum.toFixed(8) * 1);
        }
        if (sellmum != null && sellmum > 0) {
            $('#sell_mum').html(sellmum.toFixed(8) * 1);
        }
        if (buykenum != null && buykenum > 0 && buykenum != 'Infinity') {
            $('#buy_max').html(toNum(buykenum, market_round_num));
        }
        if (sellkenum != null && sellkenum > 0 && sellkenum != 'Infinity') {
            $('#sell_max').html(sellkenum);
        }
    }).bind("paste", function () {
        return false;
    }).bind("blur", function () {
        if (this.value.slice(-1) == ".") {
            this.value = this.value.slice(0, this.value.length - 1);
        }
    }).bind("keypress", function (e) {
        var code = (e.keyCode ? e.keyCode : e.which); //兼容火狐 IE
        if (this.value.indexOf(".") == -1) {
            return (code >= 48 && code <= 57) || (code == 46);
        } else {
            return code >= 48 && code <= 57
        }
    });


</script>
<script type="text/javascript">
    if (typeof console == "undefined") {    this.console = { log: function (msg) {  } };}

    var ws, name, client_list={};
    var name = userid;
    //{$Think.session.userId}
    // 连接服务端
    function connect() {
        // 创建websocket
        ws = new WebSocket("wss://wss.bjs.bi:7272");
        // 当socket连接打开时，输入用户名
        ws.onopen = onopen;
        // 当有消息时根据消息类型显示不同信息
        ws.onmessage = onmessage;
        ws.onclose = function() {
            //console.log("连接关闭，定时重连");
            connect();
        };
        ws.onerror = function() {
            // console.log("出现错误");
        };
    }

    // 连接建立时发送登录信息
    function onopen()
    {
        // 登录
        var login_data = '{"type":"login","client_name":"'+name.replace(/"/g, '\\"')+'","room_id":"'+market+'"}';
        console.log(lange.ALL_WEBSOCKET_SUCCESS +login_data);
        ws.send(login_data)
    }

    // 服务端发来消息时
    function onmessage(e)
    {
        //console.log(e.data);
        var data = eval("("+e.data+")");
        switch(data['type']){
            // 服务端ping客户端
            case 'ping':
                ws.send('{"type":"pong"}');
                break;;
            // 登录 更新用户列表
            case 'login':
                //{"type":"login","client_id":xxx,"client_name":"xxx","client_list":"[...]","time":"xxx"}
                say(data['client_id'], data['client_name'],  data['client_name']+' 加入了聊天室', data['time']);
                if(data['client_list'])
                {
                    client_list = data['client_list'];
                }
                else
                {
                    client_list[data['client_id']] = data['client_name'];
                }
                //console.log(data['client_name']+"登录成功");
                break;
            // 发言
            case 'say':
                //{"type":"say","from_client_id":xxx,"to_client_id":"all/client_id","content":"xxx","time":"xxx"}
                say(data['from_client_id'], data['from_client_name'], data['content'], data['time']);
                break;
            // 用户退出 更新用户列表
            case 'data':
                say1(data['content'], data['time']);

                break;
            case 'logout':
                //{"type":"logout","client_id":xxx,"time":"xxx"}
                say(data['from_client_id'], data['from_client_name'], data['from_client_name']+lange.TRADE_INDEX_20, data['time']);
                delete client_list[data['from_client_id']];
        }
    }

    // 发言
    function say1(content, time){
        $("#coins_timer").html("数据更新时间："+time);
        //	alert(time);
        //datay = eval('(' + content + ')');
        datay = content;
        if(datay.getJsonTop){
            getJsonTop(datay.getJsonTop);
        }
        if(datay.getJsonTop){
            getDepth(datay.getDepth);
        }
        if(datay.getTradelog){
            getTradelog(datay.getTradelog);
        }
        if(datay.getEntrustAndUsercoin){
            getEntrustAndUsercoin(datay.getEntrustAndUsercoin);
        }
        //$("#dialog").append('<div class="speech_item"><img src="http://lorempixel.com/38/38/?'+from_client_id+'" class="user_icon" /> '+from_client_name+' <br> '+time+'<div style="clear:both;"></div><p class="triangle-isosceles top">'+content+'</p> </div>');
    }
    // 发言
    function say(from_client_id, from_client_name, content, time){
        //$("#dialog").append('<div class="speech_item"><img src="http://lorempixel.com/38/38/?'+from_client_id+'" class="user_icon" /> '+from_client_name+' <br> '+time+'<div style="clear:both;"></div><p class="triangle-isosceles top">'+content+'</p> </div>');
    }

    $(function(){
        select_client_id = 'all';
        $("#client_list").change(function(){
            select_client_id = $("#client_list option:selected").attr("value");
        });
        $.getJSON("/login/getuid/t/"+Math.ceil(Math.random()*1000000000000),function(result){
            if(result.userid){
                name = result.userid;
                userId = result.userid;
                home.userInfo.userId = userId;
                isLogin = 1;
                $("#username").html(result.nickName);
                $("#login-out").addClass('hide');
                $("#login-ing").removeClass('hide');
                $("#buy-btn").html(lange.TRADE_INDEX_15);
                $("#sell-btn").html(lange.TRADE_INDEX_16);
                home.initTradeStar();
            }else{
                home.userInfo.userId = '';
                isLogin = 0;
                $("#username").html('');
                $("#buy-btn").html(lange.TRADE_INDEX_17);
                $("#sell-btn").html(lange.TRADE_INDEX_17);
                name = "youke"+Math.ceil(Math.random()*1000000000000);
                $("#login-out").removeClass('hide');
                $("#login-ing").addClass('hide');
            };
            connect();
        });

        getJsonTop1();
        getMyCoin();
        getEntrustFinish();
    });

</script>

<script>
    //菜单高亮
    $('#list-tab_index').addClass('on');
</script>

<script type="text/template" id="tpwd-tpl">
    <ul class="tpwd">
        <li>
            <label for="only"><input type="radio" id="only" value="1" name="atpwdsetting"> {$Think.Lang.V_TRADE_INDEX_51} </label>
        </li>
        <li>
            <label for="every"><input type="radio" checked="" id="every" value="2" name="atpwdsetting"> {$Think.Lang.V_TRADE_INDEX_52}</label>
        </li>
        <li>
            <label for="none"><input type="radio" id="none" name="atpwdsetting" value="3"> {$Think.Lang.V_TRADE_INDEX_53}</label>
        </li>
        <li>
            <p class="input-group trading-input-group">
                <input type="password" id="apaypassword" name="paypassword" placeholder="{$Think.Lang.V_TRADE_INDEX_54}" class="form-control form-control-tl">
            </p>
        </li>
    </ul>
</script>
<script type="text/javascript">
    function layertpwd(){
        layer.open({
            title: lange.TRADE_INDEX_18
            ,btnAlign: 'c'
            ,btn: lange.TRADE_INDEX_19
            ,yes: function(index, layero){
                if(!tpwdsettingaa()){
                    return false;
                }
                layer.close(index);
            }
            ,content: $('#tpwd-tpl').html()
        });
        $.get('/user/tpwdsetting', function (d) {
            if (d == 1) {
                $('#only').prop('checked', true);
            }
            if (d == 2) {
                $('#every').prop('checked', true);
            }
            if (d == 3) {
                $('#none').prop('checked', true);
            }
        });
    }
    //slider
    function sliderController(percentage,type){
        var e = parseFloat($("#" + type + '_max').text());
        if (isNaN(e)) e = 0;
        $("#" + type + "_num").val((e / 100 * percentage).toFixed(market_round_num));
        if ($('#' + type + '_price').val()) {
            $("#" + type + "_mum").html(((e / 100 * percentage * $('#' + type + '_price').val()) * 1.002).toFixed(2) * 1);
        }
    }
</script>

<include file="Trade:footer"/>